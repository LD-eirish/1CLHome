<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/1CLHome/1CLLogo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1st Combined Legion</title>
  <meta name="robots" content="noindex" />
  <style>
    #root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
  </style>
  <script>
    (function(){
      function getSavedPath() {
        try { return sessionStorage.getItem('redirectPath'); } catch (err) { console.warn('Unable to read redirectPath', err); return null; }
      }

      function detectBaseFromModule() {
        try {
          var moduleScript = document.querySelector('script[type="module"][src]');
          if (moduleScript && moduleScript.src) {
            var m = moduleScript.src;
            var idx = m.indexOf('/assets/');
            if (idx !== -1) return new URL(m.substring(0, idx + 1), location.origin).pathname;
          }
        } catch (error_) { console.warn('detectBaseFromModule failed', error_); }
        return '/';
      }

      function detectBaseFromIcon() {
        try {
          var icon = document.querySelector('link[rel="icon"][href]');
          if (icon && icon.href) {
            var ih = new URL(icon.href, location.origin).pathname;
            var last = ih.lastIndexOf('/') + 1;
            return ih.substring(0, last) || '/';
          }
        } catch (error_) { console.warn('detectBaseFromIcon failed', error_); }
        return '/';
      }

      function normalizePrefixedPath(base, p) {
        // Remove leading slashes from saved path then join path segments to avoid regex replace complexity
        var trimmed = p.replace(/^\/+/, '');
        var parts = (base + trimmed).split('/').filter(Boolean);
        return '/' + parts.join('/') + (p.endsWith('#') || p.endsWith('#/') ? '/' : '');
      }

      try {
        var p = getSavedPath();
        if (!p) return;

        var base = detectBaseFromModule();
        if (base === '/') base = detectBaseFromIcon();

        if (p.indexOf(base) !== 0) {
          p = normalizePrefixedPath(base, p);
        }

        history.replaceState({}, '', p);
        try { sessionStorage.removeItem('redirectPath'); } catch (err) { console.warn('Failed to remove redirectPath', err); }
      } catch (error_) {
        console.warn('Route restore failed', error_);
      }
    })();
  </script>
  <script type="module" crossorigin src="/1CLHome/assets/index-BYDxUqc0.js"></script>
  <link rel="stylesheet" crossorigin href="/1CLHome/assets/index-DHDiEMEq.css">
</head>
<body>
  <div id="root"></div>
</body>
</html>
